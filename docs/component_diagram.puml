@startuml
' --- Налаштування ---
skinparam classAttributeIconSize 0
hide emptymembers
skinparam linetype ortho

' --- Enum (Новий клас) ---
package "Модуль: models.py" {
  enum "TaskStatus (Enum)" as Enum_Status {
    TODO = "todo"
    IN_PROGRESS = "in_progress"
    DONE = "done"
  }

  class "Task (SQLAlchemy Model)" as Model_Task {
    __tablename__ = "tasks"
    + id: int (PK)
    + title: str
    + description: str
    + status: TaskStatus
    + created_at: datetime
    + updated_at: datetime
  }
}

' --- Схеми Pydantic ---
package "Модуль: schemas.py" {
  class "TaskBase" as Schema_Base {
    + title: str
    + description: str | None
  }
  
  class "TaskCreate" as Schema_Create {
    (успадковує поля Base)
  }
  
  class "TaskUpdate" as Schema_Update {
    + title: str | None
    + description: str | None
    + status: TaskStatus | None
  }
  
  class "Task (Response)" as Schema_Read {
    + id: int
    + status: TaskStatus
    + created_at: datetime
    + updated_at: datetime
  }
}

' --- Логіка ---
package "Модуль: crud.py" {
  class "CRUD Operations" as CRUD_Module {
    + get_task(db, id)
    + get_tasks(db)
    + create_task(db, task_schema)
    + update_task(db, id, task_schema)
    + delete_task(db, id)
  }
}

' --- Зв'язки ---
Model_Task .up.> Enum_Status : "Використовує"
Schema_Update .up.> Enum_Status : "Використовує"
Schema_Read .up.> Enum_Status : "Використовує"

Schema_Base <|-- Schema_Create
Schema_Base <|-- Schema_Read

CRUD_Module .> Model_Task : "Маніпулює"
CRUD_Module .> Schema_Create : "Приймає"
CRUD_Module .> Schema_Update : "Приймає"
CRUD_Module .> Schema_Read : "Повертає"

@enduml